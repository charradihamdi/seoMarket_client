{"ast":null,"code":"import { jsx as $QdH60$jsx, jsxs as $QdH60$jsxs, Fragment as $QdH60$Fragment } from \"react/jsx-runtime\";\nimport { createRef as $QdH60$createRef, PureComponent as $QdH60$PureComponent } from \"react\";\nimport $QdH60$swchelperssrc_define_propertymjs from \"@swc/helpers/src/_define_property.mjs\";\nimport { BoldTool as $QdH60$BoldTool, ItalicTool as $QdH60$ItalicTool, UnderlineTool as $QdH60$UnderlineTool, StrikeThroughTool as $QdH60$StrikeThroughTool, H1Tool as $QdH60$H1Tool, H2Tool as $QdH60$H2Tool, H3Tool as $QdH60$H3Tool, FontSizeDownTool as $QdH60$FontSizeDownTool, FontSizeUpTool as $QdH60$FontSizeUpTool, SubscriptTool as $QdH60$SubscriptTool, SuperscriptTool as $QdH60$SuperscriptTool, LinkTool as $QdH60$LinkTool, ForeColorTool as $QdH60$ForeColorTool, BackColorTool as $QdH60$BackColorTool, AlignLeftTool as $QdH60$AlignLeftTool, AlignCenterTool as $QdH60$AlignCenterTool, AlignRightTool as $QdH60$AlignRightTool, AlignFullTool as $QdH60$AlignFullTool, OrderedListTool as $QdH60$OrderedListTool, UnorderedListTool as $QdH60$UnorderedListTool, HorizontalRuleTool as $QdH60$HorizontalRuleTool, IFrameTool as $QdH60$IFrameTool, ImageTool as $QdH60$ImageTool, AudioTool as $QdH60$AudioTool, VideoTool as $QdH60$VideoTool, UndoTool as $QdH60$UndoTool, RedoTool as $QdH60$RedoTool, ResetTool as $QdH60$ResetTool, ClearTool as $QdH60$ClearTool } from \"edkit\";\nimport { blobOf as $QdH60$blobOf, parseDOM as $QdH60$parseDOM, walkDOM as $QdH60$walkDOM, insertToCursor as $QdH60$insertToCursor } from \"web-utility\";\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {\n    get: v,\n    set: s,\n    enumerable: true,\n    configurable: true\n  });\n}\nfunction $parcel$exportWildcard(dest, source) {\n  Object.keys(source).forEach(function (key) {\n    if (key === 'default' || key === '__esModule' || dest.hasOwnProperty(key)) {\n      return;\n    }\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function get() {\n        return source[key];\n      }\n    });\n  });\n  return dest;\n}\nvar $9e8d201707fc0f31$exports = {};\n$parcel$export($9e8d201707fc0f31$exports, \"renderTool\", function () {\n  return $9e8d201707fc0f31$export$56ccecc1dac11363;\n});\nfunction $9e8d201707fc0f31$export$56ccecc1dac11363(editor) {\n  const {\n    title: title,\n    active: active,\n    icon: icon,\n    usable: usable\n  } = this;\n  const Class = `btn btn-${(active ? \"\" : \"outline-\") + \"secondary\"} me-2 mb-2`;\n  return /*#__PURE__*/(0, $QdH60$jsx)(\"button\", {\n    type: \"button\",\n    title: title,\n    className: Class,\n    style: {\n      cursor: usable ? \"pointer\" : \"not-allowed\"\n    },\n    disabled: !usable,\n    onClick: event => {\n      event.preventDefault();\n      if (editor.current) this.execute(editor.current);\n    },\n    children: /*#__PURE__*/(0, $QdH60$jsx)(\"i\", {\n      className: `bi-${icon}`\n    })\n  }, icon);\n}\nvar $e38b04d9d2c72891$exports = {};\n$parcel$export($e38b04d9d2c72891$exports, \"TextTools\", function () {\n  return $e38b04d9d2c72891$export$e252ba763eff5cdc;\n});\n$parcel$export($e38b04d9d2c72891$exports, \"ColorTools\", function () {\n  return $e38b04d9d2c72891$export$bdef6e97a10dbad4;\n});\n$parcel$export($e38b04d9d2c72891$exports, \"LayoutTools\", function () {\n  return $e38b04d9d2c72891$export$145c1b37c0810d7;\n});\n$parcel$export($e38b04d9d2c72891$exports, \"MediaTools\", function () {\n  return $e38b04d9d2c72891$export$999636c6e25075fb;\n});\n$parcel$export($e38b04d9d2c72891$exports, \"ControlTools\", function () {\n  return $e38b04d9d2c72891$export$f35db4b82786c3a4;\n});\n$parcel$export($e38b04d9d2c72891$exports, \"OriginalTools\", function () {\n  return $e38b04d9d2c72891$export$9ddb256264948609;\n});\n$parcel$export($e38b04d9d2c72891$exports, \"DefaultTools\", function () {\n  return $e38b04d9d2c72891$export$aa718db1466ce312;\n});\nvar $84e1677d856194d7$exports = {};\n$parcel$export($84e1677d856194d7$exports, \"BoldTool\", function () {\n  return $84e1677d856194d7$export$10056a49e3b218eb;\n});\n$parcel$export($84e1677d856194d7$exports, \"ItalicTool\", function () {\n  return $84e1677d856194d7$export$edf99d0f51bacb1e;\n});\n$parcel$export($84e1677d856194d7$exports, \"UnderlineTool\", function () {\n  return $84e1677d856194d7$export$4b6d9c17188960d2;\n});\n$parcel$export($84e1677d856194d7$exports, \"StrikeThroughTool\", function () {\n  return $84e1677d856194d7$export$a35bffaeae8fdda0;\n});\n$parcel$export($84e1677d856194d7$exports, \"H1Tool\", function () {\n  return $84e1677d856194d7$export$30e8c6b428f8749f;\n});\n$parcel$export($84e1677d856194d7$exports, \"H2Tool\", function () {\n  return $84e1677d856194d7$export$58443375efa91029;\n});\n$parcel$export($84e1677d856194d7$exports, \"H3Tool\", function () {\n  return $84e1677d856194d7$export$75d24d6b8b747307;\n});\n$parcel$export($84e1677d856194d7$exports, \"FontSizeDownTool\", function () {\n  return $84e1677d856194d7$export$a20806c6ef6938f8;\n});\n$parcel$export($84e1677d856194d7$exports, \"FontSizeUpTool\", function () {\n  return $84e1677d856194d7$export$744da7e24e4a7382;\n});\n$parcel$export($84e1677d856194d7$exports, \"SubscriptTool\", function () {\n  return $84e1677d856194d7$export$6137518b4e998008;\n});\n$parcel$export($84e1677d856194d7$exports, \"SuperscriptTool\", function () {\n  return $84e1677d856194d7$export$7217f06c61ebd4fc;\n});\n$parcel$export($84e1677d856194d7$exports, \"LinkTool\", function () {\n  return $84e1677d856194d7$export$f6c54364b5332e66;\n});\nclass $84e1677d856194d7$export$10056a49e3b218eb extends (0, $QdH60$BoldTool) {\n  constructor() {\n    super(...arguments);\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"icon\", \"type-bold\");\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"render\", (0, $9e8d201707fc0f31$export$56ccecc1dac11363));\n  }\n}\nclass $84e1677d856194d7$export$edf99d0f51bacb1e extends (0, $QdH60$ItalicTool) {\n  constructor() {\n    super(...arguments);\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"icon\", \"type-italic\");\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"render\", (0, $9e8d201707fc0f31$export$56ccecc1dac11363));\n  }\n}\nclass $84e1677d856194d7$export$4b6d9c17188960d2 extends (0, $QdH60$UnderlineTool) {\n  constructor() {\n    super(...arguments);\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"icon\", \"type-underline\");\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"render\", (0, $9e8d201707fc0f31$export$56ccecc1dac11363));\n  }\n}\nclass $84e1677d856194d7$export$a35bffaeae8fdda0 extends (0, $QdH60$StrikeThroughTool) {\n  constructor() {\n    super(...arguments);\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"icon\", \"type-strikethrough\");\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"render\", (0, $9e8d201707fc0f31$export$56ccecc1dac11363));\n  }\n}\nclass $84e1677d856194d7$export$30e8c6b428f8749f extends (0, $QdH60$H1Tool) {\n  constructor() {\n    super(...arguments);\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"icon\", \"type-h1\");\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"render\", (0, $9e8d201707fc0f31$export$56ccecc1dac11363));\n  }\n}\nclass $84e1677d856194d7$export$58443375efa91029 extends (0, $QdH60$H2Tool) {\n  constructor() {\n    super(...arguments);\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"icon\", \"type-h2\");\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"render\", (0, $9e8d201707fc0f31$export$56ccecc1dac11363));\n  }\n}\nclass $84e1677d856194d7$export$75d24d6b8b747307 extends (0, $QdH60$H3Tool) {\n  constructor() {\n    super(...arguments);\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"icon\", \"type-h3\");\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"render\", (0, $9e8d201707fc0f31$export$56ccecc1dac11363));\n  }\n}\nclass $84e1677d856194d7$export$a20806c6ef6938f8 extends (0, $QdH60$FontSizeDownTool) {\n  constructor() {\n    super(...arguments);\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"icon\", \"sort-alpha-down\");\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"render\", (0, $9e8d201707fc0f31$export$56ccecc1dac11363));\n  }\n}\nclass $84e1677d856194d7$export$744da7e24e4a7382 extends (0, $QdH60$FontSizeUpTool) {\n  constructor() {\n    super(...arguments);\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"icon\", \"sort-alpha-up\");\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"render\", (0, $9e8d201707fc0f31$export$56ccecc1dac11363));\n  }\n}\nclass $84e1677d856194d7$export$6137518b4e998008 extends (0, $QdH60$SubscriptTool) {\n  constructor() {\n    super(...arguments);\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"icon\", \"box-arrow-down-right\");\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"render\", (0, $9e8d201707fc0f31$export$56ccecc1dac11363));\n  }\n}\nclass $84e1677d856194d7$export$7217f06c61ebd4fc extends (0, $QdH60$SuperscriptTool) {\n  constructor() {\n    super(...arguments);\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"icon\", \"box-arrow-up-right\");\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"render\", (0, $9e8d201707fc0f31$export$56ccecc1dac11363));\n  }\n}\nclass $84e1677d856194d7$export$f6c54364b5332e66 extends (0, $QdH60$LinkTool) {\n  constructor() {\n    super(...arguments);\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"icon\", \"link\");\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"render\", (0, $9e8d201707fc0f31$export$56ccecc1dac11363));\n  }\n}\nvar $f79fbcb932e44ba2$exports = {};\n$parcel$export($f79fbcb932e44ba2$exports, \"ColorSelector\", function () {\n  return $f79fbcb932e44ba2$export$9012acaf449cdfcb;\n});\n$parcel$export($f79fbcb932e44ba2$exports, \"renderColorTool\", function () {\n  return $f79fbcb932e44ba2$export$e913fac2ab7b6f29;\n});\n$parcel$export($f79fbcb932e44ba2$exports, \"ForeColorTool\", function () {\n  return $f79fbcb932e44ba2$export$cab0e15cfb8489d7;\n});\n$parcel$export($f79fbcb932e44ba2$exports, \"BackColorTool\", function () {\n  return $f79fbcb932e44ba2$export$92bb6183e7459be2;\n});\nfunction $f79fbcb932e44ba2$export$9012acaf449cdfcb(_ref) {\n  let {\n    className: className,\n    title: title,\n    type: type,\n    value: value1,\n    onChange: onChange,\n    icon: icon\n  } = _ref;\n  return /*#__PURE__*/(0, $QdH60$jsxs)(\"span\", {\n    className: `d-inline-block align-middle position-relative ${className}`,\n    title: title,\n    children: [/*#__PURE__*/(0, $QdH60$jsx)(\"input\", {\n      className: \"position-absolute w-100 h-100 rounded-3\",\n      style: {\n        left: 0,\n        top: 0,\n        zIndex: -1\n      },\n      type: \"color\",\n      value: value1,\n      onChange: _ref2 => {\n        let {\n          target: {\n            value: value\n          }\n        } = _ref2;\n        return onChange?.(value);\n      }\n    }), /*#__PURE__*/(0, $QdH60$jsx)(\"button\", {\n      className: \"btn\",\n      style: {\n        color: type === \"color\" ? value1 : \"lightgray\",\n        backgroundColor: type === \"color\" ? \"white\" : value1,\n        borderColor: value1\n      },\n      onClick: event => {\n        event.preventDefault();\n        event.currentTarget.previousElementSibling.click();\n      },\n      children: /*#__PURE__*/(0, $QdH60$jsx)(\"i\", {\n        className: `bi-${icon}`\n      })\n    })]\n  });\n}\nfunction $f79fbcb932e44ba2$export$e913fac2ab7b6f29(editor) {\n  const {\n    icon: icon,\n    name: name,\n    colorName: colorName\n  } = this;\n  return /*#__PURE__*/(0, $QdH60$jsx)($f79fbcb932e44ba2$export$9012acaf449cdfcb, {\n    className: \"me-2 mb-2\",\n    title: name,\n    icon: icon,\n    type: colorName,\n    value: this.getColor(),\n    onChange: color => editor.current && this.execute(editor.current, color)\n  }, icon);\n}\nclass $f79fbcb932e44ba2$export$cab0e15cfb8489d7 extends (0, $QdH60$ForeColorTool) {\n  constructor() {\n    super(...arguments);\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"icon\", \"file-earmark-font\");\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"render\", $f79fbcb932e44ba2$export$e913fac2ab7b6f29);\n  }\n}\nclass $f79fbcb932e44ba2$export$92bb6183e7459be2 extends (0, $QdH60$BackColorTool) {\n  constructor() {\n    super(...arguments);\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"icon\", \"file-earmark-font-fill\");\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"render\", $f79fbcb932e44ba2$export$e913fac2ab7b6f29);\n  }\n}\nvar $ca6c6c0974c8160e$exports = {};\n$parcel$export($ca6c6c0974c8160e$exports, \"AlignLeftTool\", function () {\n  return $ca6c6c0974c8160e$export$42a444ebfdcfe7b9;\n});\n$parcel$export($ca6c6c0974c8160e$exports, \"AlignCenterTool\", function () {\n  return $ca6c6c0974c8160e$export$9a2e6e0294a984eb;\n});\n$parcel$export($ca6c6c0974c8160e$exports, \"AlignRightTool\", function () {\n  return $ca6c6c0974c8160e$export$22363f91860fc258;\n});\n$parcel$export($ca6c6c0974c8160e$exports, \"AlignFullTool\", function () {\n  return $ca6c6c0974c8160e$export$42827b1362fed748;\n});\n$parcel$export($ca6c6c0974c8160e$exports, \"OrderedListTool\", function () {\n  return $ca6c6c0974c8160e$export$faf4e70f09f43a15;\n});\n$parcel$export($ca6c6c0974c8160e$exports, \"UnorderedListTool\", function () {\n  return $ca6c6c0974c8160e$export$cf4030b57a3fbe37;\n});\n$parcel$export($ca6c6c0974c8160e$exports, \"HorizontalRuleTool\", function () {\n  return $ca6c6c0974c8160e$export$dce8a7d6279fc201;\n});\nclass $ca6c6c0974c8160e$export$42a444ebfdcfe7b9 extends (0, $QdH60$AlignLeftTool) {\n  constructor() {\n    super(...arguments);\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"icon\", \"text-left\");\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"render\", (0, $9e8d201707fc0f31$export$56ccecc1dac11363));\n  }\n}\nclass $ca6c6c0974c8160e$export$9a2e6e0294a984eb extends (0, $QdH60$AlignCenterTool) {\n  constructor() {\n    super(...arguments);\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"icon\", \"text-center\");\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"render\", (0, $9e8d201707fc0f31$export$56ccecc1dac11363));\n  }\n}\nclass $ca6c6c0974c8160e$export$22363f91860fc258 extends (0, $QdH60$AlignRightTool) {\n  constructor() {\n    super(...arguments);\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"icon\", \"text-right\");\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"render\", (0, $9e8d201707fc0f31$export$56ccecc1dac11363));\n  }\n}\nclass $ca6c6c0974c8160e$export$42827b1362fed748 extends (0, $QdH60$AlignFullTool) {\n  constructor() {\n    super(...arguments);\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"icon\", \"justify\");\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"render\", (0, $9e8d201707fc0f31$export$56ccecc1dac11363));\n  }\n}\nclass $ca6c6c0974c8160e$export$faf4e70f09f43a15 extends (0, $QdH60$OrderedListTool) {\n  constructor() {\n    super(...arguments);\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"icon\", \"list-ol\");\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"render\", (0, $9e8d201707fc0f31$export$56ccecc1dac11363));\n  }\n}\nclass $ca6c6c0974c8160e$export$cf4030b57a3fbe37 extends (0, $QdH60$UnorderedListTool) {\n  constructor() {\n    super(...arguments);\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"icon\", \"list-ul\");\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"render\", (0, $9e8d201707fc0f31$export$56ccecc1dac11363));\n  }\n}\nclass $ca6c6c0974c8160e$export$dce8a7d6279fc201 extends (0, $QdH60$HorizontalRuleTool) {\n  constructor() {\n    super(...arguments);\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"icon\", \"reception-0\");\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"render\", (0, $9e8d201707fc0f31$export$56ccecc1dac11363));\n  }\n}\nvar $3ae781e262cfa361$exports = {};\n$parcel$export($3ae781e262cfa361$exports, \"IFrameTool\", function () {\n  return $3ae781e262cfa361$export$3e557574863db086;\n});\n$parcel$export($3ae781e262cfa361$exports, \"ImageTool\", function () {\n  return $3ae781e262cfa361$export$982f47444a2f88da;\n});\n$parcel$export($3ae781e262cfa361$exports, \"AudioTool\", function () {\n  return $3ae781e262cfa361$export$6024938f37e646f8;\n});\n$parcel$export($3ae781e262cfa361$exports, \"VideoTool\", function () {\n  return $3ae781e262cfa361$export$932111b8028f79ed;\n});\nclass $3ae781e262cfa361$export$3e557574863db086 extends (0, $QdH60$IFrameTool) {\n  constructor() {\n    super(...arguments);\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"icon\", \"window\");\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"render\", (0, $9e8d201707fc0f31$export$56ccecc1dac11363));\n  }\n}\nclass $3ae781e262cfa361$export$982f47444a2f88da extends (0, $QdH60$ImageTool) {\n  constructor() {\n    super(...arguments);\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"icon\", \"image\");\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"render\", (0, $9e8d201707fc0f31$export$56ccecc1dac11363));\n  }\n}\nclass $3ae781e262cfa361$export$6024938f37e646f8 extends (0, $QdH60$AudioTool) {\n  constructor() {\n    super(...arguments);\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"icon\", \"voicemail\");\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"render\", (0, $9e8d201707fc0f31$export$56ccecc1dac11363));\n  }\n}\nclass $3ae781e262cfa361$export$932111b8028f79ed extends (0, $QdH60$VideoTool) {\n  constructor() {\n    super(...arguments);\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"icon\", \"camera-video\");\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"render\", (0, $9e8d201707fc0f31$export$56ccecc1dac11363));\n  }\n}\nvar $65ad161bf0bd24b9$exports = {};\n$parcel$export($65ad161bf0bd24b9$exports, \"UndoTool\", function () {\n  return $65ad161bf0bd24b9$export$65235875731ff287;\n});\n$parcel$export($65ad161bf0bd24b9$exports, \"RedoTool\", function () {\n  return $65ad161bf0bd24b9$export$b60f30d254d1e1a6;\n});\n$parcel$export($65ad161bf0bd24b9$exports, \"ResetTool\", function () {\n  return $65ad161bf0bd24b9$export$6f46dc3d81fbb4bd;\n});\n$parcel$export($65ad161bf0bd24b9$exports, \"ClearTool\", function () {\n  return $65ad161bf0bd24b9$export$25eb377ce1feaada;\n});\nclass $65ad161bf0bd24b9$export$65235875731ff287 extends (0, $QdH60$UndoTool) {\n  constructor() {\n    super(...arguments);\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"icon\", \"arrow-counterclockwise\");\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"render\", (0, $9e8d201707fc0f31$export$56ccecc1dac11363));\n  }\n}\nclass $65ad161bf0bd24b9$export$b60f30d254d1e1a6 extends (0, $QdH60$RedoTool) {\n  constructor() {\n    super(...arguments);\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"icon\", \"arrow-clockwise\");\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"render\", (0, $9e8d201707fc0f31$export$56ccecc1dac11363));\n  }\n}\nclass $65ad161bf0bd24b9$export$6f46dc3d81fbb4bd extends (0, $QdH60$ResetTool) {\n  constructor() {\n    super(...arguments);\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"icon\", \"eraser\");\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"render\", (0, $9e8d201707fc0f31$export$56ccecc1dac11363));\n  }\n}\nclass $65ad161bf0bd24b9$export$25eb377ce1feaada extends (0, $QdH60$ClearTool) {\n  constructor() {\n    super(...arguments);\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"icon\", \"file-earmark-x\");\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"render\", (0, $9e8d201707fc0f31$export$56ccecc1dac11363));\n  }\n}\nconst $e38b04d9d2c72891$export$e252ba763eff5cdc = [(0, $84e1677d856194d7$export$10056a49e3b218eb), (0, $84e1677d856194d7$export$edf99d0f51bacb1e), (0, $84e1677d856194d7$export$4b6d9c17188960d2), (0, $84e1677d856194d7$export$a35bffaeae8fdda0), (0, $84e1677d856194d7$export$30e8c6b428f8749f), (0, $84e1677d856194d7$export$58443375efa91029), (0, $84e1677d856194d7$export$75d24d6b8b747307), (0, $84e1677d856194d7$export$a20806c6ef6938f8), (0, $84e1677d856194d7$export$744da7e24e4a7382), (0, $84e1677d856194d7$export$6137518b4e998008), (0, $84e1677d856194d7$export$7217f06c61ebd4fc), (0, $84e1677d856194d7$export$f6c54364b5332e66)];\nconst $e38b04d9d2c72891$export$bdef6e97a10dbad4 = [(0, $f79fbcb932e44ba2$export$cab0e15cfb8489d7), (0, $f79fbcb932e44ba2$export$92bb6183e7459be2)];\nconst $e38b04d9d2c72891$export$145c1b37c0810d7 = [(0, $ca6c6c0974c8160e$export$42a444ebfdcfe7b9), (0, $ca6c6c0974c8160e$export$9a2e6e0294a984eb), (0, $ca6c6c0974c8160e$export$22363f91860fc258), (0, $ca6c6c0974c8160e$export$42827b1362fed748), (0, $ca6c6c0974c8160e$export$faf4e70f09f43a15), (0, $ca6c6c0974c8160e$export$cf4030b57a3fbe37), (0, $ca6c6c0974c8160e$export$dce8a7d6279fc201)];\nconst $e38b04d9d2c72891$export$999636c6e25075fb = [(0, $3ae781e262cfa361$export$3e557574863db086), (0, $3ae781e262cfa361$export$982f47444a2f88da), (0, $3ae781e262cfa361$export$6024938f37e646f8), (0, $3ae781e262cfa361$export$932111b8028f79ed)];\nconst $e38b04d9d2c72891$export$f35db4b82786c3a4 = [(0, $65ad161bf0bd24b9$export$65235875731ff287), (0, $65ad161bf0bd24b9$export$b60f30d254d1e1a6), (0, $65ad161bf0bd24b9$export$6f46dc3d81fbb4bd), (0, $65ad161bf0bd24b9$export$25eb377ce1feaada)];\nconst $e38b04d9d2c72891$export$9ddb256264948609 = [...$e38b04d9d2c72891$export$e252ba763eff5cdc, ...$e38b04d9d2c72891$export$bdef6e97a10dbad4, ...$e38b04d9d2c72891$export$145c1b37c0810d7, ...$e38b04d9d2c72891$export$999636c6e25075fb, ...$e38b04d9d2c72891$export$f35db4b82786c3a4];\nconst $e38b04d9d2c72891$export$aa718db1466ce312 = [(0, $84e1677d856194d7$export$10056a49e3b218eb), (0, $84e1677d856194d7$export$edf99d0f51bacb1e), (0, $84e1677d856194d7$export$4b6d9c17188960d2), (0, $84e1677d856194d7$export$a35bffaeae8fdda0), (0, $84e1677d856194d7$export$30e8c6b428f8749f), (0, $84e1677d856194d7$export$58443375efa91029), (0, $84e1677d856194d7$export$75d24d6b8b747307), (0, $84e1677d856194d7$export$6137518b4e998008), (0, $84e1677d856194d7$export$7217f06c61ebd4fc), (0, $f79fbcb932e44ba2$export$cab0e15cfb8489d7), (0, $f79fbcb932e44ba2$export$92bb6183e7459be2), (0, $ca6c6c0974c8160e$export$42a444ebfdcfe7b9), (0, $ca6c6c0974c8160e$export$9a2e6e0294a984eb), (0, $ca6c6c0974c8160e$export$22363f91860fc258), (0, $ca6c6c0974c8160e$export$42827b1362fed748), (0, $ca6c6c0974c8160e$export$faf4e70f09f43a15), (0, $ca6c6c0974c8160e$export$cf4030b57a3fbe37), (0, $ca6c6c0974c8160e$export$dce8a7d6279fc201), (0, $3ae781e262cfa361$export$982f47444a2f88da), (0, $65ad161bf0bd24b9$export$65235875731ff287), (0, $65ad161bf0bd24b9$export$b60f30d254d1e1a6), (0, $65ad161bf0bd24b9$export$25eb377ce1feaada)];\n$parcel$exportWildcard($e38b04d9d2c72891$exports, $84e1677d856194d7$exports);\n$parcel$exportWildcard($e38b04d9d2c72891$exports, $f79fbcb932e44ba2$exports);\n$parcel$exportWildcard($e38b04d9d2c72891$exports, $ca6c6c0974c8160e$exports);\n$parcel$exportWildcard($e38b04d9d2c72891$exports, $3ae781e262cfa361$exports);\n$parcel$exportWildcard($e38b04d9d2c72891$exports, $65ad161bf0bd24b9$exports);\nvar $efab9e4a497112b9$exports = {};\n$parcel$export($efab9e4a497112b9$exports, \"Editor\", function () {\n  return $efab9e4a497112b9$export$7cda8d932e2f33c0;\n});\nclass $efab9e4a497112b9$export$7cda8d932e2f33c0 extends (0, $QdH60$PureComponent) {\n  static getDerivedStateFromProps(_ref3, _ref4) {\n    let {\n      tools = (0, $e38b04d9d2c72891$export$aa718db1466ce312),\n      defaultValue: defaultValue\n    } = _ref3;\n    let {\n      toolList: toolList,\n      data: data\n    } = _ref4;\n    return {\n      toolList: toolList[0] ? toolList : tools.map(ToolButton => new ToolButton()),\n      data: data || defaultValue\n    };\n  }\n  componentDidMount() {\n    document.addEventListener(\"selectionchange\", this.updateTools);\n  }\n  componentWillUnmount() {\n    document.removeEventListener(\"selectionchange\", this.updateTools);\n  }\n  async uploadFile(Type, data) {\n    if (typeof data === \"string\" && !/^(data|blob):/.test(data)) return data;\n    const tool1 = this.state.toolList.find(tool => tool instanceof Type);\n    try {\n      return await tool1?.save(typeof data === \"string\" ? await (0, $QdH60$blobOf)(data) : data);\n    } catch (error) {\n      console.error(error);\n      if (typeof data === \"string\") return data;\n    }\n  }\n  async clearHTML(markup) {\n    const fragment = document.createDocumentFragment();\n    fragment.append(...(0, $QdH60$parseDOM)(markup));\n    for (const element of (0, $QdH60$walkDOM)(fragment, Node.ELEMENT_NODE)) {\n      const {\n        style: style,\n        dataset: dataset\n      } = element;\n      if ([\"nowrap\", \"pre\"].includes(style.whiteSpace)) style.whiteSpace = \"normal\";\n      for (const key in dataset) delete dataset[key];\n      if (element instanceof HTMLImageElement) element.src = await this.uploadFile((0, $3ae781e262cfa361$export$982f47444a2f88da), element.src);else if (element instanceof HTMLAudioElement) element.src = await this.uploadFile((0, $3ae781e262cfa361$export$6024938f37e646f8), element.src);else if (element instanceof HTMLVideoElement) element.src = await this.uploadFile((0, $3ae781e262cfa361$export$932111b8028f79ed), element.src);\n    }\n    return fragment;\n  }\n  render() {\n    const {\n        toolList: toolList,\n        data: data\n      } = this.state,\n      {\n        onChange: onChange\n      } = this.props;\n    return /*#__PURE__*/(0, $QdH60$jsxs)((0, $QdH60$Fragment), {\n      children: [/*#__PURE__*/(0, $QdH60$jsx)(\"header\", {\n        children: toolList.map(tool => tool.render(this.box))\n      }), /*#__PURE__*/(0, $QdH60$jsx)(\"div\", {\n        ref: this.box,\n        className: \"form-control h-auto\",\n        contentEditable: true,\n        dangerouslySetInnerHTML: {\n          __html: data\n        },\n        onPaste: this.handlePasteDrop,\n        onDrop: this.handlePasteDrop,\n        onInput: _ref5 => {\n          let {\n            currentTarget: {\n              innerHTML: innerHTML\n            }\n          } = _ref5;\n          return onChange?.(innerHTML);\n        }\n      })]\n    });\n  }\n  constructor() {\n    super(...arguments);\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"box\", /*#__PURE__*/(0, $QdH60$createRef)());\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"state\", {\n      toolList: [],\n      data: \"\"\n    });\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"updateTools\", () => {\n      if (this.box.current === document.activeElement) this.setState({\n        toolList: [...this.state.toolList]\n      });\n    });\n    (0, $QdH60$swchelperssrc_define_propertymjs)(this, \"handlePasteDrop\", async event => {\n      event.preventDefault();\n      const {\n        currentTarget: currentTarget\n      } = event;\n      const list = event.type === \"paste\" ? [...event.clipboardData.items] : [...event.dataTransfer.items];\n      for (const item of list) if (item.type === \"text/html\") {\n        const raw = await new Promise(resolve => item.getAsString(resolve));\n        (0, $QdH60$insertToCursor)(await this.clearHTML(raw));\n      } else if (item.type.startsWith(\"image/\")) {\n        const URI = await this.uploadFile((0, $3ae781e262cfa361$export$982f47444a2f88da), item.getAsFile());\n        if (URI) (0, $QdH60$insertToCursor)(...(0, $QdH60$parseDOM)(`<img src=\"${URI}\" />`));\n      } else if (item.type.startsWith(\"audio/\")) {\n        const URI = await this.uploadFile((0, $3ae781e262cfa361$export$6024938f37e646f8), item.getAsFile());\n        if (URI) (0, $QdH60$insertToCursor)(...(0, $QdH60$parseDOM)(`<audio src=\"${URI}\" />`));\n      } else if (item.type.startsWith(\"video/\")) {\n        const URI = await this.uploadFile((0, $3ae781e262cfa361$export$932111b8028f79ed), item.getAsFile());\n        if (URI) (0, $QdH60$insertToCursor)(...(0, $QdH60$parseDOM)(`<video src=\"${URI}\" />`));\n      }\n      this.props.onChange?.(currentTarget.innerHTML);\n    });\n  }\n}\n(0, $QdH60$swchelperssrc_define_propertymjs)($efab9e4a497112b9$export$7cda8d932e2f33c0, \"displayName\", \"Editor\");\nexport { $9e8d201707fc0f31$export$56ccecc1dac11363 as renderTool, $e38b04d9d2c72891$export$e252ba763eff5cdc as TextTools, $e38b04d9d2c72891$export$bdef6e97a10dbad4 as ColorTools, $e38b04d9d2c72891$export$145c1b37c0810d7 as LayoutTools, $e38b04d9d2c72891$export$999636c6e25075fb as MediaTools, $e38b04d9d2c72891$export$f35db4b82786c3a4 as ControlTools, $e38b04d9d2c72891$export$9ddb256264948609 as OriginalTools, $e38b04d9d2c72891$export$aa718db1466ce312 as DefaultTools, $84e1677d856194d7$export$10056a49e3b218eb as BoldTool, $84e1677d856194d7$export$edf99d0f51bacb1e as ItalicTool, $84e1677d856194d7$export$4b6d9c17188960d2 as UnderlineTool, $84e1677d856194d7$export$a35bffaeae8fdda0 as StrikeThroughTool, $84e1677d856194d7$export$30e8c6b428f8749f as H1Tool, $84e1677d856194d7$export$58443375efa91029 as H2Tool, $84e1677d856194d7$export$75d24d6b8b747307 as H3Tool, $84e1677d856194d7$export$a20806c6ef6938f8 as FontSizeDownTool, $84e1677d856194d7$export$744da7e24e4a7382 as FontSizeUpTool, $84e1677d856194d7$export$6137518b4e998008 as SubscriptTool, $84e1677d856194d7$export$7217f06c61ebd4fc as SuperscriptTool, $84e1677d856194d7$export$f6c54364b5332e66 as LinkTool, $f79fbcb932e44ba2$export$9012acaf449cdfcb as ColorSelector, $f79fbcb932e44ba2$export$e913fac2ab7b6f29 as renderColorTool, $f79fbcb932e44ba2$export$cab0e15cfb8489d7 as ForeColorTool, $f79fbcb932e44ba2$export$92bb6183e7459be2 as BackColorTool, $ca6c6c0974c8160e$export$42a444ebfdcfe7b9 as AlignLeftTool, $ca6c6c0974c8160e$export$9a2e6e0294a984eb as AlignCenterTool, $ca6c6c0974c8160e$export$22363f91860fc258 as AlignRightTool, $ca6c6c0974c8160e$export$42827b1362fed748 as AlignFullTool, $ca6c6c0974c8160e$export$faf4e70f09f43a15 as OrderedListTool, $ca6c6c0974c8160e$export$cf4030b57a3fbe37 as UnorderedListTool, $ca6c6c0974c8160e$export$dce8a7d6279fc201 as HorizontalRuleTool, $3ae781e262cfa361$export$3e557574863db086 as IFrameTool, $3ae781e262cfa361$export$982f47444a2f88da as ImageTool, $3ae781e262cfa361$export$6024938f37e646f8 as AudioTool, $3ae781e262cfa361$export$932111b8028f79ed as VideoTool, $65ad161bf0bd24b9$export$65235875731ff287 as UndoTool, $65ad161bf0bd24b9$export$b60f30d254d1e1a6 as RedoTool, $65ad161bf0bd24b9$export$6f46dc3d81fbb4bd as ResetTool, $65ad161bf0bd24b9$export$25eb377ce1feaada as ClearTool, $efab9e4a497112b9$export$7cda8d932e2f33c0 as Editor };","map":{"version":3,"mappings":"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","names":["$9e8d201707fc0f31$export$56ccecc1dac11363","editor","title","active","icon","usable","Class","type","className","style","cursor","disabled","onClick","event","preventDefault","current","execute","$84e1677d856194d7$export$10056a49e3b218eb","$84e1677d856194d7$export$edf99d0f51bacb1e","$84e1677d856194d7$export$4b6d9c17188960d2","$84e1677d856194d7$export$a35bffaeae8fdda0","$84e1677d856194d7$export$30e8c6b428f8749f","$84e1677d856194d7$export$58443375efa91029","$84e1677d856194d7$export$75d24d6b8b747307","$84e1677d856194d7$export$a20806c6ef6938f8","$84e1677d856194d7$export$744da7e24e4a7382","$84e1677d856194d7$export$6137518b4e998008","$84e1677d856194d7$export$7217f06c61ebd4fc","$84e1677d856194d7$export$f6c54364b5332e66","$f79fbcb932e44ba2$export$9012acaf449cdfcb","value","value1","onChange","left","top","zIndex","target","color","backgroundColor","borderColor","currentTarget","previousElementSibling","click","$f79fbcb932e44ba2$export$e913fac2ab7b6f29","name","colorName","getColor","$f79fbcb932e44ba2$export$cab0e15cfb8489d7","$f79fbcb932e44ba2$export$92bb6183e7459be2","$ca6c6c0974c8160e$export$42a444ebfdcfe7b9","$ca6c6c0974c8160e$export$9a2e6e0294a984eb","$ca6c6c0974c8160e$export$22363f91860fc258","$ca6c6c0974c8160e$export$42827b1362fed748","$ca6c6c0974c8160e$export$faf4e70f09f43a15","$ca6c6c0974c8160e$export$cf4030b57a3fbe37","$ca6c6c0974c8160e$export$dce8a7d6279fc201","$3ae781e262cfa361$export$3e557574863db086","$3ae781e262cfa361$export$982f47444a2f88da","$3ae781e262cfa361$export$6024938f37e646f8","$3ae781e262cfa361$export$932111b8028f79ed","$65ad161bf0bd24b9$export$65235875731ff287","$65ad161bf0bd24b9$export$b60f30d254d1e1a6","$65ad161bf0bd24b9$export$6f46dc3d81fbb4bd","$65ad161bf0bd24b9$export$25eb377ce1feaada","$e38b04d9d2c72891$export$e252ba763eff5cdc","$e38b04d9d2c72891$export$bdef6e97a10dbad4","$e38b04d9d2c72891$export$145c1b37c0810d7","$e38b04d9d2c72891$export$999636c6e25075fb","$e38b04d9d2c72891$export$f35db4b82786c3a4","$e38b04d9d2c72891$export$9ddb256264948609","$e38b04d9d2c72891$export$aa718db1466ce312","$efab9e4a497112b9$export$7cda8d932e2f33c0","getDerivedStateFromProps","tools","defaultValue","toolList","data","map","ToolButton","componentDidMount","document","addEventListener","updateTools","componentWillUnmount","removeEventListener","uploadFile","Type","test","tool1","state","find","tool","save","error","console","clearHTML","markup","fragment","createDocumentFragment","append","element","Node","ELEMENT_NODE","dataset","includes","whiteSpace","key","HTMLImageElement","src","HTMLAudioElement","HTMLVideoElement","render","props","box","ref","contentEditable","dangerouslySetInnerHTML","__html","onPaste","handlePasteDrop","onDrop","onInput","innerHTML","activeElement","setState","list","clipboardData","items","dataTransfer","item","raw","Promise","resolve","getAsString","startsWith","URI","getAsFile"],"sources":["source/Tool.tsx","source/tools/Text.ts","source/tools/Color.tsx","source/tools/Layout.ts","source/tools/Media.ts","source/tools/Control.ts","source/tools/index.ts","source/Editor.tsx"],"sourcesContent":["import React, { RefObject } from 'react';\nimport { Tool } from 'edkit';\n\nexport function renderTool(this: Tool, editor: RefObject<HTMLElement>) {\n    const { title, active, icon, usable } = this;\n\n    const Class = `btn btn-${\n        (active ? '' : 'outline-') + 'secondary'\n    } me-2 mb-2`;\n\n    return (\n        <button\n            key={icon}\n            type=\"button\"\n            title={title}\n            className={Class}\n            style={{ cursor: usable ? 'pointer' : 'not-allowed' }}\n            disabled={!usable}\n            onClick={event => {\n                event.preventDefault();\n\n                if (editor.current) this.execute(editor.current);\n            }}\n        >\n            <i className={`bi-${icon}`} />\n        </button>\n    );\n}\n","import {\n    BoldTool as BT,\n    ItalicTool as IT,\n    UnderlineTool as UT,\n    StrikeThroughTool as STT,\n    H1Tool as H1T,\n    H2Tool as H2T,\n    H3Tool as H3T,\n    FontSizeDownTool as FSDT,\n    FontSizeUpTool as FSUT,\n    SubscriptTool as SubST,\n    SuperscriptTool as SupST,\n    LinkTool as LT\n} from 'edkit';\n\nimport { renderTool } from '../Tool';\n\nexport class BoldTool extends BT {\n    icon = 'type-bold';\n    render = renderTool;\n}\n\nexport class ItalicTool extends IT {\n    icon = 'type-italic';\n    render = renderTool;\n}\n\nexport class UnderlineTool extends UT {\n    icon = 'type-underline';\n    render = renderTool;\n}\n\nexport class StrikeThroughTool extends STT {\n    icon = 'type-strikethrough';\n    render = renderTool;\n}\n\nexport class H1Tool extends H1T {\n    icon = 'type-h1';\n    render = renderTool;\n}\n\nexport class H2Tool extends H2T {\n    icon = 'type-h2';\n    render = renderTool;\n}\n\nexport class H3Tool extends H3T {\n    icon = 'type-h3';\n    render = renderTool;\n}\n\nexport class FontSizeDownTool extends FSDT {\n    icon = 'sort-alpha-down';\n    render = renderTool;\n}\n\nexport class FontSizeUpTool extends FSUT {\n    icon = 'sort-alpha-up';\n    render = renderTool;\n}\n\nexport class SubscriptTool extends SubST {\n    icon = 'box-arrow-down-right';\n    render = renderTool;\n}\n\nexport class SuperscriptTool extends SupST {\n    icon = 'box-arrow-up-right';\n    render = renderTool;\n}\n\nexport class LinkTool extends LT {\n    icon = 'link';\n    render = renderTool;\n}\n","import React, { PropsWithoutRef, RefObject } from 'react';\nimport {\n    ColorName,\n    ColorTool,\n    ForeColorTool as FCT,\n    BackColorTool as BCT\n} from 'edkit';\n\nexport type ColorSelectorProps = PropsWithoutRef<{\n    className?: string;\n    title?: string;\n    icon: string;\n    type: ColorName;\n    value?: string;\n    onChange?(color: string): any;\n}>;\n\nexport function ColorSelector({\n    className,\n    title,\n    type,\n    value,\n    onChange,\n    icon\n}: ColorSelectorProps) {\n    return (\n        <span\n            className={`d-inline-block align-middle position-relative ${className}`}\n            title={title}\n        >\n            <input\n                className=\"position-absolute w-100 h-100 rounded-3\"\n                style={{ left: 0, top: 0, zIndex: -1 }}\n                type=\"color\"\n                value={value}\n                onChange={({ target: { value } }) => onChange?.(value)}\n            />\n            <button\n                className=\"btn\"\n                style={{\n                    color: type === 'color' ? value : 'lightgray',\n                    backgroundColor: type === 'color' ? 'white' : value,\n                    borderColor: value\n                }}\n                onClick={event => {\n                    event.preventDefault();\n                    (\n                        event.currentTarget\n                            .previousElementSibling as HTMLInputElement\n                    ).click();\n                }}\n            >\n                <i className={`bi-${icon}`} />\n            </button>\n        </span>\n    );\n}\n\nexport function renderColorTool(\n    this: ColorTool,\n    editor: RefObject<HTMLElement>\n) {\n    const { icon, name, colorName } = this;\n\n    return (\n        <ColorSelector\n            className=\"me-2 mb-2\"\n            key={icon}\n            title={name}\n            icon={icon}\n            type={colorName}\n            value={this.getColor()}\n            onChange={color =>\n                editor.current && this.execute(editor.current, color)\n            }\n        />\n    );\n}\n\nexport class ForeColorTool extends FCT {\n    icon = 'file-earmark-font';\n    render = renderColorTool;\n}\n\nexport class BackColorTool extends BCT {\n    icon = 'file-earmark-font-fill';\n    render = renderColorTool;\n}\n","import {\n    AlignLeftTool as ALT,\n    AlignCenterTool as ACT,\n    AlignRightTool as ART,\n    AlignFullTool as AFT,\n    OrderedListTool as OLT,\n    UnorderedListTool as ULT,\n    HorizontalRuleTool as HRT\n} from 'edkit';\n\nimport { renderTool } from '../Tool';\n\nexport class AlignLeftTool extends ALT {\n    icon = 'text-left';\n    render = renderTool;\n}\n\nexport class AlignCenterTool extends ACT {\n    icon = 'text-center';\n    render = renderTool;\n}\n\nexport class AlignRightTool extends ART {\n    icon = 'text-right';\n    render = renderTool;\n}\n\nexport class AlignFullTool extends AFT {\n    icon = 'justify';\n    render = renderTool;\n}\n\nexport class OrderedListTool extends OLT {\n    icon = 'list-ol';\n    render = renderTool;\n}\n\nexport class UnorderedListTool extends ULT {\n    icon = 'list-ul';\n    render = renderTool;\n}\n\nexport class HorizontalRuleTool extends HRT {\n    icon = 'reception-0';\n    render = renderTool;\n}\n","import {\n    IFrameTool as FT,\n    ImageTool as IT,\n    AudioTool as AT,\n    VideoTool as VT\n} from 'edkit';\n\nimport { renderTool } from '../Tool';\n\nexport class IFrameTool extends FT {\n    icon = 'window';\n    render = renderTool;\n}\n\nexport class ImageTool extends IT {\n    icon = 'image';\n    render = renderTool;\n}\n\nexport class AudioTool extends AT {\n    icon = 'voicemail';\n    render = renderTool;\n}\n\nexport class VideoTool extends VT {\n    icon = 'camera-video';\n    render = renderTool;\n}\n","import {\n    UndoTool as UDT,\n    RedoTool as RDT,\n    ResetTool as RST,\n    ClearTool as CT\n} from 'edkit';\n\nimport { renderTool } from '../Tool';\n\nexport class UndoTool extends UDT {\n    icon = 'arrow-counterclockwise';\n    render = renderTool;\n}\n\nexport class RedoTool extends RDT {\n    icon = 'arrow-clockwise';\n    render = renderTool;\n}\n\nexport class ResetTool extends RST {\n    icon = 'eraser';\n    render = renderTool;\n}\n\nexport class ClearTool extends CT {\n    icon = 'file-earmark-x';\n    render = renderTool;\n}\n","import {\n    BoldTool,\n    ItalicTool,\n    UnderlineTool,\n    StrikeThroughTool,\n    H1Tool,\n    H2Tool,\n    H3Tool,\n    FontSizeDownTool,\n    FontSizeUpTool,\n    SubscriptTool,\n    SuperscriptTool,\n    LinkTool\n} from './Text';\nimport { ForeColorTool, BackColorTool } from './Color';\nimport {\n    AlignLeftTool,\n    AlignCenterTool,\n    AlignRightTool,\n    AlignFullTool,\n    OrderedListTool,\n    UnorderedListTool,\n    HorizontalRuleTool\n} from './Layout';\nimport { IFrameTool, ImageTool, AudioTool, VideoTool } from './Media';\nimport { UndoTool, RedoTool, ResetTool, ClearTool } from './Control';\n\nexport * from './Text';\nexport * from './Color';\nexport * from './Layout';\nexport * from './Media';\nexport * from './Control';\n\nexport const TextTools = [\n    BoldTool,\n    ItalicTool,\n    UnderlineTool,\n    StrikeThroughTool,\n    H1Tool,\n    H2Tool,\n    H3Tool,\n    FontSizeDownTool,\n    FontSizeUpTool,\n    SubscriptTool,\n    SuperscriptTool,\n    LinkTool\n];\nexport const ColorTools = [ForeColorTool, BackColorTool];\nexport const LayoutTools = [\n    AlignLeftTool,\n    AlignCenterTool,\n    AlignRightTool,\n    AlignFullTool,\n    OrderedListTool,\n    UnorderedListTool,\n    HorizontalRuleTool\n];\nexport const MediaTools = [IFrameTool, ImageTool, AudioTool, VideoTool];\nexport const ControlTools = [UndoTool, RedoTool, ResetTool, ClearTool];\n\nexport const OriginalTools = [\n    ...TextTools,\n    ...ColorTools,\n    ...LayoutTools,\n    ...MediaTools,\n    ...ControlTools\n];\n\nexport const DefaultTools = [\n    BoldTool,\n    ItalicTool,\n    UnderlineTool,\n    StrikeThroughTool,\n    H1Tool,\n    H2Tool,\n    H3Tool,\n    SubscriptTool,\n    SuperscriptTool,\n    ForeColorTool,\n    BackColorTool,\n    AlignLeftTool,\n    AlignCenterTool,\n    AlignRightTool,\n    AlignFullTool,\n    OrderedListTool,\n    UnorderedListTool,\n    HorizontalRuleTool,\n    ImageTool,\n    UndoTool,\n    RedoTool,\n    ClearTool\n];\n","import { Tool } from 'edkit';\nimport React, {\n    createRef,\n    PropsWithoutRef,\n    PureComponent,\n    ClipboardEvent,\n    DragEvent\n} from 'react';\nimport {\n    Constructor,\n    parseDOM,\n    walkDOM,\n    insertToCursor,\n    blobOf\n} from 'web-utility';\n\nimport { ImageTool, AudioTool, VideoTool, DefaultTools } from './tools';\n\nexport type EditorProps = PropsWithoutRef<{\n    tools?: { new (...args: any[]): Tool }[];\n    defaultValue?: string;\n    onChange?(value: string): any;\n}>;\n\ninterface EditorState {\n    toolList: Tool[];\n    data: string;\n}\n\nexport class Editor extends PureComponent<EditorProps, EditorState> {\n    static displayName = 'Editor';\n\n    box = createRef<HTMLDivElement>();\n\n    state = {\n        toolList: [] as Tool[],\n        data: ''\n    };\n\n    static getDerivedStateFromProps(\n        { tools = DefaultTools, defaultValue }: EditorProps,\n        { toolList, data }: EditorState\n    ): EditorState {\n        return {\n            toolList: toolList[0]\n                ? toolList\n                : tools.map(ToolButton => new ToolButton()),\n            data: data || defaultValue\n        };\n    }\n\n    componentDidMount() {\n        document.addEventListener('selectionchange', this.updateTools);\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener('selectionchange', this.updateTools);\n    }\n\n    updateTools = () => {\n        if (this.box.current === document.activeElement)\n            this.setState({ toolList: [...this.state.toolList] });\n    };\n\n    async uploadFile(\n        Type:\n            | Constructor<ImageTool>\n            | Constructor<AudioTool>\n            | Constructor<VideoTool>,\n        data: string | Blob\n    ) {\n        if (typeof data === 'string' && !/^(data|blob):/.test(data))\n            return data;\n\n        const tool = this.state.toolList.find(\n            tool => tool instanceof Type\n        ) as ImageTool;\n\n        try {\n            return await tool?.save(\n                typeof data === 'string' ? await blobOf(data) : data\n            );\n        } catch (error) {\n            console.error(error);\n\n            if (typeof data === 'string') return data;\n        }\n    }\n\n    async clearHTML(markup: string) {\n        const fragment = document.createDocumentFragment();\n\n        fragment.append(...parseDOM(markup));\n\n        for (const element of walkDOM<HTMLElement>(\n            fragment,\n            Node.ELEMENT_NODE\n        )) {\n            const { style, dataset } = element;\n\n            if (['nowrap', 'pre'].includes(style.whiteSpace))\n                style.whiteSpace = 'normal';\n\n            for (const key in dataset) delete dataset[key];\n\n            if (element instanceof HTMLImageElement)\n                element.src = await this.uploadFile(ImageTool, element.src);\n            else if (element instanceof HTMLAudioElement)\n                element.src = await this.uploadFile(AudioTool, element.src);\n            else if (element instanceof HTMLVideoElement)\n                element.src = await this.uploadFile(VideoTool, element.src);\n        }\n        return fragment;\n    }\n\n    handlePasteDrop = async (event: ClipboardEvent | DragEvent) => {\n        event.preventDefault();\n\n        const { currentTarget } = event;\n\n        const list =\n            event.type === 'paste'\n                ? [...(event as ClipboardEvent).clipboardData.items]\n                : [...(event as DragEvent).dataTransfer.items];\n\n        for (const item of list)\n            if (item.type === 'text/html') {\n                const raw = await new Promise<string>(resolve =>\n                    item.getAsString(resolve)\n                );\n                insertToCursor(await this.clearHTML(raw));\n            } else if (item.type.startsWith('image/')) {\n                const URI = await this.uploadFile(ImageTool, item.getAsFile());\n\n                if (URI) insertToCursor(...parseDOM(`<img src=\"${URI}\" />`));\n            } else if (item.type.startsWith('audio/')) {\n                const URI = await this.uploadFile(AudioTool, item.getAsFile());\n\n                if (URI) insertToCursor(...parseDOM(`<audio src=\"${URI}\" />`));\n            } else if (item.type.startsWith('video/')) {\n                const URI = await this.uploadFile(VideoTool, item.getAsFile());\n\n                if (URI) insertToCursor(...parseDOM(`<video src=\"${URI}\" />`));\n            }\n        this.props.onChange?.(currentTarget.innerHTML);\n    };\n\n    render() {\n        const { toolList, data } = this.state,\n            { onChange } = this.props;\n\n        return (\n            <>\n                <header>{toolList.map(tool => tool.render(this.box))}</header>\n                <div\n                    ref={this.box}\n                    className=\"form-control h-auto\"\n                    contentEditable\n                    dangerouslySetInnerHTML={{ __html: data }}\n                    onPaste={this.handlePasteDrop}\n                    onDrop={this.handlePasteDrop}\n                    onInput={({ currentTarget: { innerHTML } }) =>\n                        onChange?.(innerHTML)\n                    }\n                />\n            </>\n        );\n    }\n}\n"]},"metadata":{},"sourceType":"module"}